{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///fly.umd.min.js","webpack:///webpack/bootstrap 30a79b148d64645639ab","webpack:///./src/utils.js","webpack:///./src/fly.js"],"names":["root","factory","exports","module","define","amd","a","i","this","modules","__webpack_require__","moduleId","installedModules","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","0","_typeof","Symbol","iterator","obj","constructor","type","ob","toString","slice","toLowerCase","isObject","real","isFormData","val","FormData","trim","str","replace","encode","encodeURIComponent","formatParams","data","arr","JSON","stringify","push","join","merge","b","key","undefined","5","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","protoProps","staticProps","utils","isBrowser","document","Fly","engine","XMLHttpRequest","interceptors","response","use","handler","onerror","request","config","method","baseURL","headers","timeout","withCredentials","url","options","_this","xhr","promise","Promise","_resolve","_reject","defaultHeaders","Content-type","rqi","rpi","body","abort","operate","reject","e","resolve","toUpperCase","location","href","baseUrl","indexOf","isAbsolute","pathname","split","pop","protocol","host","substr","t","createElement","responseType","isGet","open","k","setRequestHeader","onload","status","responseText","getResponseHeader","parse","_response","err","Error","statusText","msg","ontimeout","_options","send","promises","all","callback","apply","_","cb"],"mappings":"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","file":"fly.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 0:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nmodule.exports = {\n    type: function type(ob) {\n        return Object.prototype.toString.call(ob).slice(8, -1).toLowerCase();\n    },\n    isObject: function isObject(ob, real) {\n        if (real) {\n            return this.type(ob) === \"object\";\n        } else {\n            return ob && (typeof ob === 'undefined' ? 'undefined' : _typeof(ob)) === 'object';\n        }\n    },\n    isFormData: function isFormData(val) {\n        return typeof FormData !== 'undefined' && val instanceof FormData;\n    },\n    trim: function trim(str) {\n        return str.replace(/(^\\s*)|(\\s*$)/g, '');\n    },\n    encode: function encode(val) {\n        return encodeURIComponent(val).replace(/%40/gi, '@').replace(/%3A/gi, ':').replace(/%24/g, '$').replace(/%2C/gi, ',').replace(/%20/g, '+').replace(/%5B/gi, '[').replace(/%5D/gi, ']');\n    },\n    formatParams: function formatParams(data) {\n        var arr = [];\n        for (var name in data) {\n            var value = data[name];\n            if (this.isObject(value)) {\n                value = JSON.stringify(value);\n            }\n            arr.push(this.encode(name) + \"=\" + this.encode(value));\n        }\n        return arr.join(\"&\");\n    },\n\n    //不覆盖已存在的属性\n    merge: function merge(a, b) {\n        for (var key in b) {\n            //ES5 should use hasOwnProperty()\n            if (a[key] === undefined) {\n                a[key] = b[key];\n            } else if (this.isObject(b[key], 1) && this.isObject(a[key], 1)) {\n                this.merge(a[key], b[key]);\n            }\n        }\n        return a;\n    }\n};\n\n/***/ }),\n\n/***/ 5:\n/***/ (function(module, exports, __webpack_require__) {\n\nfunction KEEP(_,cb){cb();}\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar utils = __webpack_require__(0);\nvar isBrowser = typeof document !== \"undefined\";\n\nvar Fly = function () {\n    function Fly(engine) {\n        _classCallCheck(this, Fly);\n\n        this.engine = engine || XMLHttpRequest;\n        this.interceptors = {\n            response: {\n                use: function use(handler, onerror) {\n                    this.handler = handler;\n                    this.onerror = onerror;\n                }\n            },\n            request: {\n                use: function use(handler) {\n                    this.handler = handler;\n                }\n            }\n        };\n        this.config = {\n            method: \"GET\",\n            baseURL: \"\",\n            headers: {},\n            timeout: 0,\n            withCredentials: false\n        };\n    }\n\n    _createClass(Fly, [{\n        key: \"request\",\n        value: function request(url, data, options) {\n            var _this = this;\n\n            var xhr = new this.engine();\n            var promise = new Promise(function (_resolve, _reject) {\n                options = options || {};\n                var defaultHeaders = {\n                    'Content-type': 'application/x-www-form-urlencoded'\n                };\n                utils.merge(defaultHeaders, _this.config.headers);\n                _this.config.headers = defaultHeaders;\n                utils.merge(options, _this.config);\n                var rqi = _this.interceptors.request;\n                var rpi = _this.interceptors.response;\n                options.body = data;\n                var abort = false;\n                var operate = {\n                    reject: function reject(e) {\n                        abort = true;\n                        _reject(e);\n                    }, resolve: function resolve(d) {\n                        abort = true;\n                        _resolve(d);\n                    }\n                };\n                url = utils.trim(url || \"\");\n                options.method = options.method.toUpperCase();\n                options.url = url;\n                if (rqi.handler) {\n                    options = rqi.handler(options, operate);\n                    if (!options) return;\n                }\n                if (abort) return;\n                url = utils.trim(options.url);\n                if (!url && isBrowser) url = location.href;\n                var baseUrl = utils.trim(options.baseURL || \"\");\n                if (url.indexOf(\"http\") !== 0) {\n                    var isAbsolute = url[0] === \"/\";\n                    if (!baseUrl && isBrowser) {\n                        var arr = location.pathname.split(\"/\");\n                        arr.pop();\n                        baseUrl = location.protocol + \"//\" + location.host + (isAbsolute ? \"\" : arr.join(\"/\"));\n                    }\n                    if (baseUrl[baseUrl.length - 1] !== \"/\") {\n                        baseUrl += \"/\";\n                    }\n                    url = baseUrl + (isAbsolute ? url.substr(1) : url);\n                    if (isBrowser) {\n                        var t = document.createElement(\"a\");\n                        t.href = url;\n                        url = t.href;\n                    }\n                }\n                var responseType = utils.trim(options.responseType || \"\");\n                //try catch for ie >=9\n                try {\n                    xhr.timeout = options.timeout || 0;\n                    if (responseType !== \"stream\") {\n                        xhr.responseType = responseType;\n                    }\n                } catch (e) {}\n                xhr.withCredentials = !!options.withCredentials;\n                var isGet = options.method === \"GET\";\n\n                if (isGet) {\n                    if (options.body) {\n                        data = utils.formatParams(options.body);\n                        url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + data;\n                    }\n                    xhr.open(\"GET\", url);\n                } else {\n                    xhr.open(\"POST\", url);\n                }\n\n                if ([\"object\", \"array\"].indexOf(utils.type(options.body)) !== -1) {\n                    options.headers[\"Content-type\"] = 'application/json;charset=utf-8';\n                    data = JSON.stringify(options.body);\n                }\n\n                for (var k in options.headers) {\n                    //删除content-type\n                    if (k.toLowerCase() === \"content-type\" && (utils.isFormData(options.body) || !options.body || isGet)) {\n                        delete options.headers[k]; // Let the browser set it\n                    } else {\n                        try {\n                            //浏览器环境下，有些头字段是只读的，如cookie, 写会抛异常\n                            xhr.setRequestHeader(k, options.headers[k]);\n                        } catch (e) {}\n                    }\n                }\n\n                var onerror = function onerror(e) {\n                    if (rpi.onerror) {\n                        e = rpi.onerror(e, operate);\n                    }\n                    return e;\n                };\n\n                xhr.onload = function () {\n                    if (xhr.status >= 200 && xhr.status < 300) {\n                        //ie9 has not xhr.response\n                        var response = xhr.response || xhr.responseText;\n                        if ((xhr.getResponseHeader(\"Content-Type\") || \"\").indexOf(\"json\") !== -1) {\n                            response = JSON.parse(response);\n                        }\n                        var data = { data: response, xhr: xhr, request: options };\n                        utils.merge(data, xhr._response);\n                        if (rpi.handler) {\n                            data = rpi.handler(data, operate) || data;\n                        }\n                        if (abort) return;\n                        _resolve(data);\n                    } else {\n                        var err = new Error(xhr.statusText);\n                        err.status = xhr.status;\n                        err = onerror(err) || err;\n                        if (abort) return;\n                        _reject(err);\n                    }\n                };\n\n                xhr.onerror = function (e) {\n                    var err = new Error(e.msg || \"Network Error\");\n                    err.status = 0;\n                    err = onerror(err);\n                    if (abort) return;\n                    _reject(err);\n                };\n\n                xhr.ontimeout = function () {\n                    var err = new Error(\"timeout [ \" + xhr.timeout + \"ms ]\");\n                    err.status = 1;\n                    err = onerror(err);\n                    if (abort) return;\n                    _reject(err);\n                };\n                xhr._options = options;\n                xhr.send(isGet ? null : data);\n            });\n            promise.xhr = xhr;\n            return promise;\n        }\n    }, {\n        key: \"get\",\n        value: function get(url, data, options) {\n            return this.request(url, data, options);\n        }\n    }, {\n        key: \"post\",\n        value: function post(url, data, options) {\n            return this.request(url, data, utils.merge({ method: \"POST\" }, options));\n        }\n    }, {\n        key: \"all\",\n        value: function all(promises) {\n            return Promise.all(promises);\n        }\n    }, {\n        key: \"spread\",\n        value: function spread(callback) {\n            return function wrap(arr) {\n                return callback.apply(null, arr);\n            };\n        }\n    }]);\n\n    return Fly;\n}();\n\n//build环境定义全局变量\n\n\n;\n//build环境定义全局变量\nKEEP(\"!build\", function () {\n    module.exports = Fly;\n});\n\n/***/ })\n\n/******/ });\n});\n\n\n// WEBPACK FOOTER //\n// fly.umd.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 30a79b148d64645639ab","'use strict';\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nmodule.exports = {\n    type: function type(ob) {\n        return Object.prototype.toString.call(ob).slice(8, -1).toLowerCase();\n    },\n    isObject: function isObject(ob, real) {\n        if (real) {\n            return this.type(ob) === \"object\";\n        } else {\n            return ob && (typeof ob === 'undefined' ? 'undefined' : _typeof(ob)) === 'object';\n        }\n    },\n    isFormData: function isFormData(val) {\n        return typeof FormData !== 'undefined' && val instanceof FormData;\n    },\n    trim: function trim(str) {\n        return str.replace(/(^\\s*)|(\\s*$)/g, '');\n    },\n    encode: function encode(val) {\n        return encodeURIComponent(val).replace(/%40/gi, '@').replace(/%3A/gi, ':').replace(/%24/g, '$').replace(/%2C/gi, ',').replace(/%20/g, '+').replace(/%5B/gi, '[').replace(/%5D/gi, ']');\n    },\n    formatParams: function formatParams(data) {\n        var arr = [];\n        for (var name in data) {\n            var value = data[name];\n            if (this.isObject(value)) {\n                value = JSON.stringify(value);\n            }\n            arr.push(this.encode(name) + \"=\" + this.encode(value));\n        }\n        return arr.join(\"&\");\n    },\n\n    //不覆盖已存在的属性\n    merge: function merge(a, b) {\n        for (var key in b) {\n            //ES5 should use hasOwnProperty()\n            if (a[key] === undefined) {\n                a[key] = b[key];\n            } else if (this.isObject(b[key], 1) && this.isObject(a[key], 1)) {\n                this.merge(a[key], b[key]);\n            }\n        }\n        return a;\n    }\n};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/utils.js\n// module id = 0\n// module chunks = 0 1","function KEEP(_,cb){cb();}\n\"use strict\";\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar utils = require('./utils');\nvar isBrowser = typeof document !== \"undefined\";\n\nvar Fly = function () {\n    function Fly(engine) {\n        _classCallCheck(this, Fly);\n\n        this.engine = engine || XMLHttpRequest;\n        this.interceptors = {\n            response: {\n                use: function use(handler, onerror) {\n                    this.handler = handler;\n                    this.onerror = onerror;\n                }\n            },\n            request: {\n                use: function use(handler) {\n                    this.handler = handler;\n                }\n            }\n        };\n        this.config = {\n            method: \"GET\",\n            baseURL: \"\",\n            headers: {},\n            timeout: 0,\n            withCredentials: false\n        };\n    }\n\n    _createClass(Fly, [{\n        key: \"request\",\n        value: function request(url, data, options) {\n            var _this = this;\n\n            var xhr = new this.engine();\n            var promise = new Promise(function (_resolve, _reject) {\n                options = options || {};\n                var defaultHeaders = {\n                    'Content-type': 'application/x-www-form-urlencoded'\n                };\n                utils.merge(defaultHeaders, _this.config.headers);\n                _this.config.headers = defaultHeaders;\n                utils.merge(options, _this.config);\n                var rqi = _this.interceptors.request;\n                var rpi = _this.interceptors.response;\n                options.body = data;\n                var abort = false;\n                var operate = {\n                    reject: function reject(e) {\n                        abort = true;\n                        _reject(e);\n                    }, resolve: function resolve(d) {\n                        abort = true;\n                        _resolve(d);\n                    }\n                };\n                url = utils.trim(url || \"\");\n                options.method = options.method.toUpperCase();\n                options.url = url;\n                if (rqi.handler) {\n                    options = rqi.handler(options, operate);\n                    if (!options) return;\n                }\n                if (abort) return;\n                url = utils.trim(options.url);\n                if (!url && isBrowser) url = location.href;\n                var baseUrl = utils.trim(options.baseURL || \"\");\n                if (url.indexOf(\"http\") !== 0) {\n                    var isAbsolute = url[0] === \"/\";\n                    if (!baseUrl && isBrowser) {\n                        var arr = location.pathname.split(\"/\");\n                        arr.pop();\n                        baseUrl = location.protocol + \"//\" + location.host + (isAbsolute ? \"\" : arr.join(\"/\"));\n                    }\n                    if (baseUrl[baseUrl.length - 1] !== \"/\") {\n                        baseUrl += \"/\";\n                    }\n                    url = baseUrl + (isAbsolute ? url.substr(1) : url);\n                    if (isBrowser) {\n                        var t = document.createElement(\"a\");\n                        t.href = url;\n                        url = t.href;\n                    }\n                }\n                var responseType = utils.trim(options.responseType || \"\");\n                //try catch for ie >=9\n                try {\n                    xhr.timeout = options.timeout || 0;\n                    if (responseType !== \"stream\") {\n                        xhr.responseType = responseType;\n                    }\n                } catch (e) {}\n                xhr.withCredentials = !!options.withCredentials;\n                var isGet = options.method === \"GET\";\n\n                if (isGet) {\n                    if (options.body) {\n                        data = utils.formatParams(options.body);\n                        url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + data;\n                    }\n                    xhr.open(\"GET\", url);\n                } else {\n                    xhr.open(\"POST\", url);\n                }\n\n                if ([\"object\", \"array\"].indexOf(utils.type(options.body)) !== -1) {\n                    options.headers[\"Content-type\"] = 'application/json;charset=utf-8';\n                    data = JSON.stringify(options.body);\n                }\n\n                for (var k in options.headers) {\n                    //删除content-type\n                    if (k.toLowerCase() === \"content-type\" && (utils.isFormData(options.body) || !options.body || isGet)) {\n                        delete options.headers[k]; // Let the browser set it\n                    } else {\n                        try {\n                            //浏览器环境下，有些头字段是只读的，如cookie, 写会抛异常\n                            xhr.setRequestHeader(k, options.headers[k]);\n                        } catch (e) {}\n                    }\n                }\n\n                var onerror = function onerror(e) {\n                    if (rpi.onerror) {\n                        e = rpi.onerror(e, operate);\n                    }\n                    return e;\n                };\n\n                xhr.onload = function () {\n                    if (xhr.status >= 200 && xhr.status < 300) {\n                        //ie9 has not xhr.response\n                        var response = xhr.response || xhr.responseText;\n                        if ((xhr.getResponseHeader(\"Content-Type\") || \"\").indexOf(\"json\") !== -1) {\n                            response = JSON.parse(response);\n                        }\n                        var data = { data: response, xhr: xhr, request: options };\n                        utils.merge(data, xhr._response);\n                        if (rpi.handler) {\n                            data = rpi.handler(data, operate) || data;\n                        }\n                        if (abort) return;\n                        _resolve(data);\n                    } else {\n                        var err = new Error(xhr.statusText);\n                        err.status = xhr.status;\n                        err = onerror(err) || err;\n                        if (abort) return;\n                        _reject(err);\n                    }\n                };\n\n                xhr.onerror = function (e) {\n                    var err = new Error(e.msg || \"Network Error\");\n                    err.status = 0;\n                    err = onerror(err);\n                    if (abort) return;\n                    _reject(err);\n                };\n\n                xhr.ontimeout = function () {\n                    var err = new Error(\"timeout [ \" + xhr.timeout + \"ms ]\");\n                    err.status = 1;\n                    err = onerror(err);\n                    if (abort) return;\n                    _reject(err);\n                };\n                xhr._options = options;\n                xhr.send(isGet ? null : data);\n            });\n            promise.xhr = xhr;\n            return promise;\n        }\n    }, {\n        key: \"get\",\n        value: function get(url, data, options) {\n            return this.request(url, data, options);\n        }\n    }, {\n        key: \"post\",\n        value: function post(url, data, options) {\n            return this.request(url, data, utils.merge({ method: \"POST\" }, options));\n        }\n    }, {\n        key: \"all\",\n        value: function all(promises) {\n            return Promise.all(promises);\n        }\n    }, {\n        key: \"spread\",\n        value: function spread(callback) {\n            return function wrap(arr) {\n                return callback.apply(null, arr);\n            };\n        }\n    }]);\n\n    return Fly;\n}();\n\n//build环境定义全局变量\n\n\n;\n//build环境定义全局变量\nKEEP(\"!build\", function () {\n    module.exports = Fly;\n});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/fly.js\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}